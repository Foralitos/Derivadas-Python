<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados - Derivadas Parciales</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <nav>
            <a href="/">Calculadora</a>
            <a href="/about">Acerca de</a>
        </nav>
    </header>

    <main>
        <div class="results-header">
            <h1>‚úÖ Resultados del C√°lculo</h1>
            <a href="/" class="btn-back">‚Üê Nueva C√°lculo</a>
        </div>

        <div class="result-info">
            <h2>Par√°metros Utilizados</h2>
            <div class="param-grid">
                <div class="param-item">
                    <strong>Funci√≥n:</strong>
                    <code>f(x, y) = {{ result.function }}</code>
                </div>
                <div class="param-item">
                    <strong>Dominio en x:</strong>
                    <span>[{{ result.domain.x_min }}, {{ result.domain.x_max }}]</span>
                </div>
                <div class="param-item">
                    <strong>Dominio en y:</strong>
                    <span>[{{ result.domain.y_min }}, {{ result.domain.y_max }}]</span>
                </div>
                <div class="param-item">
                    <strong>Malla:</strong>
                    <span>{{ result.mesh.nx }} √ó {{ result.mesh.ny }} puntos</span>
                </div>
                <div class="param-item">
                    <strong>Espaciamiento hx:</strong>
                    <span>{{ "%.6f"|format(result.mesh.hx) }}</span>
                </div>
                <div class="param-item">
                    <strong>Espaciamiento hy:</strong>
                    <span>{{ "%.6f"|format(result.mesh.hy) }}</span>
                </div>
            </div>
        </div>

        <div class="stats-section">
            <h2>Estad√≠sticas de los Resultados</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>f(x, y)</h3>
                    <p>M√≠nimo: <strong>{{ "%.6f"|format(result.stats.f_min) }}</strong></p>
                    <p>M√°ximo: <strong>{{ "%.6f"|format(result.stats.f_max) }}</strong></p>
                </div>
                <div class="stat-card">
                    <h3>‚àÇf/‚àÇx</h3>
                    <p>M√≠nimo: <strong>{{ "%.6f"|format(result.stats.df_dx_min) }}</strong></p>
                    <p>M√°ximo: <strong>{{ "%.6f"|format(result.stats.df_dx_max) }}</strong></p>
                </div>
                <div class="stat-card">
                    <h3>‚àÇf/‚àÇy</h3>
                    <p>M√≠nimo: <strong>{{ "%.6f"|format(result.stats.df_dy_min) }}</strong></p>
                    <p>M√°ximo: <strong>{{ "%.6f"|format(result.stats.df_dy_max) }}</strong></p>
                </div>
            </div>
        </div>

        <div class="plots-section">
            <h2>üìä Visualizaciones</h2>

            <div class="plot-container">
                <h3>Gr√°ficas de Contorno</h3>
                <p>Comparaci√≥n de la funci√≥n original y sus derivadas parciales</p>
                <img src="{{ url_for('static', filename=result.plots.contour) }}"
                     alt="Gr√°ficas de contorno"
                     class="plot-image">
            </div>

            <div class="plot-container">
                <h3>Superficies 3D</h3>
                <p>Visualizaci√≥n tridimensional de f(x,y), ‚àÇf/‚àÇx y ‚àÇf/‚àÇy</p>
                <img src="{{ url_for('static', filename=result.plots.surface) }}"
                     alt="Superficies 3D"
                     class="plot-image">
            </div>

            <div class="plot-container">
                <h3>Campo Vectorial del Gradiente</h3>
                <p>Gradiente ‚àáf = (‚àÇf/‚àÇx, ‚àÇf/‚àÇy) representado como campo vectorial</p>
                <img src="{{ url_for('static', filename=result.plots.vector) }}"
                     alt="Campo vectorial"
                     class="plot-image">
            </div>
        </div>

        <div class="explanation-section">
            <h2>üìö Explicaci√≥n del M√©todo</h2>
            <div class="method-explanation">
                <h3>Diferencias Finitas Centrales</h3>
                <p>Se utiliz√≥ el m√©todo de <strong>diferencias finitas centrales de segundo orden</strong> para aproximar las derivadas parciales:</p>

                <div class="formula-box">
                    <h4>Para ‚àÇf/‚àÇx:</h4>
                    <p class="formula">‚àÇf/‚àÇx|<sub>(i,j)</sub> ‚âà [f(i, j+1) - f(i, j-1)] / (2¬∑h<sub>x</sub>)</p>
                    <p class="formula-values">Con h<sub>x</sub> = {{ "%.6f"|format(result.mesh.hx) }}</p>
                </div>

                <div class="formula-box">
                    <h4>Para ‚àÇf/‚àÇy:</h4>
                    <p class="formula">‚àÇf/‚àÇy|<sub>(i,j)</sub> ‚âà [f(i+1, j) - f(i-1, j)] / (2¬∑h<sub>y</sub>)</p>
                    <p class="formula-values">Con h<sub>y</sub> = {{ "%.6f"|format(result.mesh.hy) }}</p>
                </div>

                <h4>Tratamiento de Bordes</h4>
                <p>En los puntos de borde (primera y √∫ltima fila/columna), donde no hay puntos vecinos a ambos lados, se utiliz√≥ el m√©todo de <strong>duplicar el valor del punto vecino inmediato</strong>:</p>
                <ul>
                    <li>En el borde izquierdo/inferior: diferencia hacia adelante (forward)</li>
                    <li>En el borde derecho/superior: diferencia hacia atr√°s (backward)</li>
                </ul>
            </div>
        </div>

        <div class="action-buttons">
            <a href="/" class="btn-primary">üîÑ Calcular Otra Funci√≥n</a>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Calculadora de Derivadas Parciales | M√©todos Num√©ricos</p>
    </footer>
</body>
</html>
